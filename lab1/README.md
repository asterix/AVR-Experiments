# Solution Comments
## Wiring instructions
My system works on hard timing reference generated by cascaded timers, so an external connection needs to be made before powering the system ON. The logic used is to tick and internal timer using another one in PWM mode (used to drive the green LED on the GPIO). The same signal that drives the green LED acts as the external CLK source for an internal reference timer. Timer 3 PWM is used to clock Timer 0. Follow the below easy steps to finish wiring.

* Step 1: Remove the buzzer jumper on the board connecting PORTD7 to the buzzer.
* Step 2: Connect PORTD7 to PORTB6 (same as the green GPIO LED). Schematic naming D6 -> D10.
* Step 3: Make sure that the above connection is stable (not wiggling). Double check the connections. PORTD7 -> PORTB6 (D6 -> D10).

If the above wiring is not done, ALL the readings from my system WILL BE GARBAGE. So, please connect them correctly. But once done, you'll get highly accurate measurements!

NOTE: All experiments can be run error free for upto 65 seconds (when the green LED is configured to toggle every 100ms). If run longer than 65 seconds, the reported results are just unreliable.

## Answers to questions
### 1 - WCET of Hough Transform
Below are the steps I used to do the WCET analysis of Hough transform
* Step 1: Configure a hardware timer to interrupt every 25ms by overflowing.
* Step 2: Disable all interrupts except the timer used above. In the ISR count the number of overflows of the timer.
* Step 3: Implement the below pseudocode in ```main()```
```
start_timer();
hough_transform(...);
stop_timer();

time_taken_ms = 25 * num_timer_overflows + TCNT1/65536 * 25 - num_timer_overflows * (38/CPU_FREQUENCY)
```
Factors affecting WCET analysis are:
* 1 - If ```hough_transform()``` implementation has a lot of conditional paths then depending on the data set used and the paths traversed, WCET changes. To mitigate such issues, a vast data set traversing all paths should be used for analysis.

* 2 - WCET analysis is also affected by how often ```hough_transform()``` is interrupted during execution and how long the interrupting process occupies the processor. Hence during WCET analysis, frequent interruptions, long ISRs should be avoided. In my case I only increment a global variable every 25ms when the timer overflows. Depending on how long interrupt processing takes, this offset can be subtracted from the actual measurement. My ISR has the below overhead: (38 CPU cycles)
```
ISR(TIMER1_OVF_vect)
{
     72e:	1f 92       	push	r1
     730:	0f 92       	push	r0
     732:	0f b6       	in	r0, 0x3f	; 63
     734:	0f 92       	push	r0
     736:	11 24       	eor	r1, r1
     738:	8f 93       	push	r24
     73a:	9f 93       	push	r25
   timer1_ovf++;
     73c:	80 91 39 03 	lds	r24, 0x0339
     740:	90 91 3a 03 	lds	r25, 0x033A
     744:	01 96       	adiw	r24, 0x01	; 1
     746:	90 93 3a 03 	sts	0x033A, r25
     74a:	80 93 39 03 	sts	0x0339, r24
}
     74e:	9f 91       	pop	r25
     750:	8f 91       	pop	r24
     752:	0f 90       	pop	r0
     754:	0f be       	out	0x3f, r0	; 63
     756:	0f 90       	pop	r0
     758:	1f 90       	pop	r1
     75a:	18 95       	reti
```
* 3 - Overall confidence in such a controlled analysis is high, but there is always a code path traverse uncertainty which has to be accounted for. If the analysis done repeatedly on a wide range of images and averaged, then a confidence of +/- 5% should be easily achievable.

### 2 - Periods of tasks
The period of a periodic task on real-time systems is defined as the time between two releases.

* Period of Hough transform - 100ms
* Period of Red LED task    - 100ms
* Period of Yellow LED task - 100ms
* Period of Jitter LED task - undefined because this is not a periodic task. It's a sporadic task.

The period of a task is influenced by its release deadline.

### 3 - 

